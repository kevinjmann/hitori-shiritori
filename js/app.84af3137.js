(function(e){function t(t){for(var n,a,d=t[0],s=t[1],c=t[2],f=0,l=[];f<d.length;f++)a=d[f],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&l.push(o[a][0]),o[a]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(l.length)l.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],n=!0,d=1;d<i.length;d++){var s=i[d];0!==o[s]&&(n=!1)}n&&(r.splice(t--,1),e=a(a.s=i[0]))}return e}var n={},o={app:0},r=[];function a(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=n,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(i,n,function(t){return e[t]}.bind(null,n));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/hitori-shiritori/";var d=window["webpackJsonp"]=window["webpackJsonp"]||[],s=d.push.bind(d);d.push=t,d=d.slice();for(var c=0;c<d.length;c++)t(d[c]);var u=s;r.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"1be3":function(e,t,i){e.exports=i.p+"img/speaker-filled-audio-tool.a5706847.png"},3217:function(e,t,i){},4234:function(e,t,i){"use strict";i("3217")},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("7a23");function o(e,t,i,o,r,a){var d=Object(n["j"])("hitori-shiritori");return Object(n["i"])(),Object(n["b"])(d)}i("b680");var r=i("1be3"),a=i.n(r),d=i("71bc"),s=i.n(d),c={key:0,class:"modal"},u={key:0,class:"modal-content"},f=Object(n["e"])("label",{for:"acc-prev-answers-cb"},"Keep track of all answers in a round?",-1),l={class:"modal-menu"},h={key:1,class:"modal"},p={key:0,class:"modal-content"},m=Object(n["f"])('<p> This is a single player English version of of a Japanese word game called Shiritori with a computer player as an opponent. You take turns with the computer saying words that start with the final sound of the previous word. A round starts when you record any English word and click submit. The round ends when you send a word starting with an incorrect sound or you send a word with a final sound &quot;ng&quot; /ŋ/ as in &quot;song&quot;, which has no words that start with it in English (barring a few rare loan words). There is an option to also lose if you say the same answer more than once in round. The score keeps track of the number of times you were correct in the current round. </p><p> This is based only on the pronunciation of a word, and not the spelling. Vowel groups are also counted as one sound. The sound of &quot;ir&quot; in &quot;bird&quot; and &quot;ear&quot; in &quot;early&quot; is also one sound. Some examples of valid chains of answers: </p><div class="example-container"><ul><li>bird -&gt; drive -&gt; voyage -&gt; giraffe</li><li>fly -&gt; Idaho -&gt; omen -&gt; new</li></ul></div><p> The phonetic transcriptions are all shown in a small subset of the <a href="https://en.wikipedia.org/wiki/International_Phonetic_Alphabet">International Phonetic Alphabet</a>. </p><p><a target="_blank" href="https://icons8.com/icon/12653/microphone">Microphone</a> icon by <a target="_blank" href="https://icons8.com">Icons8</a></p><p><a href="https://www.flaticon.com/free-icons/speaker" title="speaker icons">Speaker icons created by Freepik - Flaticon</a></p>',6),g={class:"modal-menu"},b=Object(n["e"])("h1",{class:"game-title"},"Hitori Shiritori",-1),v={key:2,class:"start-prompt"},w=Object(n["e"])("p",null,"Record any word to get started.",-1),y=[w],R={key:3,class:"loader-container"},S=Object(n["e"])("div",{class:"loader"},null,-1),k=[S],A={key:4,class:"feedback-container"},C={key:0,class:"user-answer-container"},O=Object(n["g"])("I heard you say: "),T={class:"user-answer"},L={class:"incorrect-msg-container"},j={key:0},M={key:1},D={key:1,class:"computer-answer-container"},U=Object(n["e"])("p",{class:"next-word-prefix"},"The next word is:",-1),x=Object(n["g"])(" - "),B=Object(n["e"])("img",{class:"speaker-icon",src:a.a},null,-1),I=["src"],E={class:"score-container"},P=Object(n["g"])("Score: "),F={class:"btn-container"},z={class:"audio-container"},W={id:"audio",ref:"audioPlayer"},N=["disabled"],q={class:"menu-container"};function G(e,t,i,o,r,a){return Object(n["i"])(),Object(n["d"])("div",null,[e.showOptions?(Object(n["i"])(),Object(n["d"])("div",c,[e.showOptions?(Object(n["i"])(),Object(n["d"])("div",u,[f,Object(n["n"])(Object(n["e"])("input",{class:"checkbox",type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.doAccumulatePreviousAnswers=t}),id:"acc-prev-answers-cb"},null,512),[[n["l"],e.doAccumulatePreviousAnswers]]),Object(n["e"])("div",l,[Object(n["e"])("a",{href:"#",onClick:t[1]||(t[1]=function(t){return e.showOptions=!1})},"close")])])):Object(n["c"])("",!0)])):Object(n["c"])("",!0),e.showInstructions?(Object(n["i"])(),Object(n["d"])("div",h,[e.showInstructions?(Object(n["i"])(),Object(n["d"])("div",p,[m,Object(n["e"])("div",g,[Object(n["e"])("a",{href:"#",onClick:t[2]||(t[2]=function(t){return e.showInstructions=!1})},"close")])])):Object(n["c"])("",!0)])):Object(n["c"])("",!0),b,e.hasStarted?Object(n["c"])("",!0):(Object(n["i"])(),Object(n["d"])("div",v,y)),e.isLoading?(Object(n["i"])(),Object(n["d"])("div",R,k)):(Object(n["i"])(),Object(n["d"])("div",A,[e.userAnswer.length>0?(Object(n["i"])(),Object(n["d"])("div",C,[Object(n["e"])("p",null,[O,Object(n["e"])("span",T,"/"+Object(n["k"])(e.userAnswer)+"/",1)])])):Object(n["c"])("",!0),Object(n["e"])("div",L,[e.lastInputWasRepeat?(Object(n["i"])(),Object(n["d"])("p",j,"You've already said that word before, try again.")):e.lastInputWasWrong?(Object(n["i"])(),Object(n["d"])("p",M,"That was incorrect, try again.")):Object(n["c"])("",!0)]),e.computerWord.length>0||e.computerIpa.length>0?(Object(n["i"])(),Object(n["d"])("div",D,[U,Object(n["e"])("p",null,[Object(n["e"])("span",{class:"computer-answer-row",onClick:t[3]||(t[3]=function(){return a.playComputerAudio&&a.playComputerAudio.apply(a,arguments)})},[Object(n["e"])("span",null,Object(n["k"])(e.computerWord),1),x,Object(n["e"])("span",null,"/"+Object(n["k"])(e.computerIpa)+"/",1),B]),e.computerAudioUrl?Object(n["n"])((Object(n["i"])(),Object(n["d"])("audio",{key:0,ref:"computerAudio",src:e.computerAudioUrl},null,8,I)),[[n["m"],!1]]):Object(n["c"])("",!0)])])):Object(n["c"])("",!0)])),Object(n["e"])("div",E,[Object(n["e"])("p",null,[P,Object(n["e"])("span",null,Object(n["k"])(e.tweenedScore.toFixed(0)),1)])]),Object(n["e"])("div",F,[Object(n["e"])("div",{class:"btn record-btn",onClick:t[4]||(t[4]=function(e){return a.handleRecordClick()})},[Object(n["e"])("img",{class:Object(n["h"])(["recording-center",{recording:e.isRecording}]),src:s.a},null,2)])]),Object(n["e"])("div",z,[Object(n["e"])("audio",W,null,512),Object(n["n"])(Object(n["e"])("button",{class:"submit-btn",disabled:e.hasSubmittedOnce,onClick:t[5]||(t[5]=function(){return a.callEvaluatorApi&&a.callEvaluatorApi.apply(a,arguments)})},"Submit",8,N),[[n["m"],e.audio]])]),Object(n["e"])("div",q,[Object(n["e"])("div",null,[Object(n["e"])("a",{href:"#",onClick:t[6]||(t[6]=function(t){return e.showInstructions=!0})},"How to play")]),Object(n["e"])("div",null,[Object(n["e"])("a",{href:"#",onClick:t[7]||(t[7]=function(t){return e.showOptions=!0})},"Options")])])])}var V=i("c7eb"),H=i("1da1"),Q=(i("caad"),i("2532"),i("d3b7"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),i("a9e3"),i("8c1c")),K=i.n(Q),Y=i("cffa"),J=i("5c40"),X=i("bc3a"),Z="https://tjrg921f64.execute-api.ap-northeast-1.amazonaws.com/Prod/hitori_shiritori/",_={data:function(){return{score:0,recorder:null,audio:null,computerAudioUrl:"",hasSubmittedOnce:!1,userAnswer:"",computerWord:"",computerIpa:"",computerPromptLastSound:"",isLoading:!1,isRecording:!1,doAccumulatePreviousAnswers:!1,previousUserAnswers:[],testCounter:0,tweenedScore:0,hasStarted:!1,showOptions:!1,showInstructions:!1,lastInputWasWrong:!1,lastInputWasRepeat:!1}},methods:{stopRecording:function(){this.isRecording&&(this.recorder.stopRecording(this.stopRecordingCallback),this.isRecording=!1)},handleRecordClick:function(){var e=this;this.isRecording?this.stopRecording():(this.hasSubmittedOnce=!1,this.isRecording=!0,this.onRecordClick(),setTimeout((function(){e.stopRecording()}),2e3))},getIsIncorrectBasedOnPreviousAnswer:function(e){return!!this.doAccumulatePreviousAnswers&&this.previousUserAnswers.includes(e)},playComputerAudio:function(){var e=this;return Object(H["a"])(Object(V["a"])().mark((function t(){return Object(V["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(J["t"])((function(){e.$refs.computerAudio&&e.$refs.computerAudio.play()}));case 1:case"end":return t.stop()}}),t)})))()},handleEvaluatorResponseData:function(e){if(e.hasError)alert("User input not recognized, please try again.");else{this.hasStarted||(this.hasStarted=!0);var t=!1;e.userAnswer&&(t=this.getIsIncorrectBasedOnPreviousAnswer(e.userAnswer),this.userAnswer=e.userAnswer,this.doAccumulatePreviousAnswers&&this.previousUserAnswers.push(this.userAnswer)),e.isCorrect&&!t?(this.score+=1,this.lastInputWasWrong=!1,this.lastInputWasRepeat=!1):(this.score=0,this.lastInputWasWrong=!0,this.lastInputWasRepeat=t),this.computerWord=e.computerWord,this.computerIpa=e.computerIpa,this.computerPromptLastSound=e.computerPromptLastSound,this.computerAudioUrl=e.computerAudio,this.playComputerAudio()}},callEvaluatorApi:function(){var e=this;return Object(H["a"])(Object(V["a"])().mark((function t(){var i,n;return Object(V["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasSubmittedOnce){t.next=19;break}return e.hasSubmittedOnce=!0,i=new FormData,i.set("audio",e.audio),i.append("prevPrompt",e.computerPromptLastSound),e.isLoading=!0,t.prev=6,t.next=9,X({method:"post",url:Z,data:i,timeout:3e4,headers:{"access-control-allow-origin":"*","content-type":"multipart/form-data"}});case 9:n=t.sent,e.isLoading=!1,e.handleEvaluatorResponseData(n.data),t.next=19;break;case 14:t.prev=14,t.t0=t["catch"](6),e.isLoading=!1,console.log(t.t0),e.hasSubmittedOnce=!1;case 19:case"end":return t.stop()}}),t,null,[[6,14]])})))()},stopRecordingCallback:function(){var e=this.recorder.getBlob();this.audio=e,this.$refs.audioPlayer.srcObject=null,this.$refs.audioPlayer.src=URL.createObjectURL(e),this.$refs.audioPlayer.controls=!0,this.$refs.audioPlayer.setAttribute("style","display:inherit"),this.recorder.microphone.stop()},onRecordClick:function(){var e=this;this.captureMicrophone((function(t){e.$refs.audioPlayer.srcObject=t,e.recorder=K()(t,{type:"audio",recorderType:K.a.StereoAudioRecorder,numberOfAudioChannels:1,desiredSampRate:16e3}),e.recorder.startRecording(),e.recorder.microphone=t}))},captureMicrophone:function(e){navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){e(t)})).catch((function(e){alert("Unable to capture your microphone. Please check console log."),console.error(e)}))},mounted:function(){}},watch:{score:function(e,t){e<t?Y["a"].to(this,{duration:.5,tweenedScore:Number(e)||0}):this.tweenedScore=e}}},$=(i("4234"),i("6b0d")),ee=i.n($);const te=ee()(_,[["render",G]]);var ie=te,ne={name:"App",components:{HitoriShiritori:ie}};i("aa56");const oe=ee()(ne,[["render",o]]);var re=oe;Object(n["a"])(re).mount("#app")},"71bc":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAADg0lEQVRoge2ay0tUURzHPz3QERwdsiJFFxlENVlQ0iKsfyBqFRUVtS2rdfYP9LKdPRbRploEvQikB4WLiEiTMOiBmRkKmeRCyFF8dVuc3+2eed9z54wO6QcOM/Obe76/35l7f+fc87sD9qkCTgHPgAFgQtoA8FS+q8yDX2tEgEvAOOBkaWNAs/QpKKJAD16gz4FjQB2wQlqd2F5ox32RvgXBRmAEFdgHYLuPPg3AR+kzIhpzynLgOyqgJ0DYoG8YlTMO0AdUWI/OgKsSyDugNED/UqBLNC5bjMuINcAUMANsyUGnHvgjWrUW4jLmDOqXfGhB65FonbagZcxrcX7QgtZh0XplQcuYIXG+1oLWOtEatKBlxFJUbjhAuQW9ctGaAZZY0PNNiMwr9ziwK0W//cBklr6hIAEtDtIpB9xgCwb9jAT6BW3rzfYZyRs2BpLqbtc0R8ZzDWLe5UgLcE37PFs50gxctKD/jz5p2RwHJZ1eot+0LORIQOY8R+bFpVUQ+B1IjPht7DRqMwRQbCEOV8PdYLmEgVE/An4HMgQswzvt08Aveb/Kp0YmqjQ/M/K+BLWP/+lHwGQgi4gvrPXKa71PjUy4Gr2aTR9cVvwOpENeGzRbq7zu9amRCVejVbO5vjqwSBQ1o9zTbLV4xYetOWhvQ+XGJLBasz8Qn+tz0E5JL/Cb+B3hFXHWRbByUBh4Lxotmj2CSvKeQJFm4YQ4PKvZKlDzvIMqtpkU6MpQhW4H+IaaTFwuiP14DvGmpQQ1g8SAas0exSuZfgJ2+NDaCXzGK5nq9d8aVJF7EDuLbUoOiPOXQJFm34AqSLurcxvQCGwCVkrbLLY27bhu6etSjCoJOcC+fA3C5bY4up5gL0fdco+RfFOY2GLAeZIrMDfk+1t5ij2OMqAdbzBFCd9XovLpMdCP96CnX2yNJC+ixXiDeCM+ZoUI8BbvMqvOfHhGavAup3bs1MmMKENdAu4TqHOYPYGKoGYn91K8idmsZ51DwA8JZhS1aB5BLW76rBNCLaJHgftyrCN9bdSPrRACTqIWzcTEHpaWaP+KyqW8TbG5EgWaiJ9iu7XPTcRPuQVN4o7P9o4yiXm3Qyx4FgZSaPw3AwnKHqCT7E+fTNoY6nbHzz8nrLDbYvCp2hR2ChpZ6RSHzaiHorYIAXdE+65F3bRMkN8z4t4NGBHkF41JyyfG1fm/hWlmBjazS44AAAAASUVORK5CYII="},"8c1c":function(e,t,i){"use strict";(function(n,o){var r,a,d=i("7037").default;function s(e,t){if(!e)throw"First parameter is required.";t=t||{type:"video"},t=new c(e,t);var i=this;function n(n){return t.disableLogs,n&&(t=new c(e,n)),t.disableLogs,m?(m.clearRecordedData(),m.record(),p("recording"),i.recordingDuration&&h(),i):(o((function(){i.recordingDuration&&h()})),i)}function o(i){i&&(t.initCallback=function(){i(),i=t.initCallback=null});var n=new u(e,t);m=new n(e,t),m.record(),p("recording"),t.disableLogs}function r(e){if(e=e||function(){},m){if("paused"===i.state)return i.resumeRecording(),void setTimeout((function(){r(e)}),1);"recording"===i.state||t.disableLogs||console.warn('Recording state should be: "recording", however current state is: ',i.state),t.disableLogs,"gif"!==t.type?m.stop(n):(m.stop(),n()),p("stopped")}else v();function n(n){if(m){Object.keys(m).forEach((function(e){"function"!==typeof m[e]&&(i[e]=m[e])}));var o=m.blob;if(!o){if(!n)throw"Recording failed.";m.blob=o=n}if(o&&t.disableLogs,e){var r;try{r=b.createObjectURL(o)}catch(a){}"function"===typeof e.call?e.call(i,r):e(r)}t.autoWriteToDisk&&l((function(e){var i={};i[t.type+"Blob"]=e,P.Store(i)}))}else"function"===typeof e.call?e.call(i,""):e("")}}function a(){m?"recording"===i.state?(p("paused"),m.pause(),t.disableLogs):t.disableLogs||console.warn("Unable to pause the recording. Recording state: ",i.state):v()}function d(){m?"paused"===i.state?(p("recording"),m.resume(),t.disableLogs):t.disableLogs||console.warn("Unable to resume the recording. Recording state: ",i.state):v()}function f(e){postMessage((new FileReaderSync).readAsDataURL(e))}function l(e,i){if(!e)throw"Pass a callback function over getDataURL.";var n=i?i.blob:(m||{}).blob;if(!n)return t.disableLogs||console.warn("Blob encoder did not finish its job yet."),void setTimeout((function(){l(e,i)}),1e3);if("undefined"===typeof Worker||navigator.mozGetUserMedia){var o=new FileReader;o.readAsDataURL(n),o.onload=function(t){e(t.target.result)}}else{var r=a(f);r.onmessage=function(t){e(t.data)},r.postMessage(n)}function a(e){try{var t=b.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),i=new Worker(t);return b.revokeObjectURL(t),i}catch(n){}}}function h(e){e=e||0,"paused"!==i.state?"stopped"!==i.state&&(e>=i.recordingDuration?r(i.onRecordingStopped):(e+=1e3,setTimeout((function(){h(e)}),1e3))):setTimeout((function(){h(e)}),1e3)}function p(e){i&&(i.state=e,"function"===typeof i.onStateChanged.call?i.onStateChanged.call(i,e):i.onStateChanged(e))}var m,g='It seems that recorder is destroyed or "startRecording" is not invoked for '+t.type+" recorder.";function v(){!0!==t.disableLogs&&console.warn(g)}var w={startRecording:n,stopRecording:r,pauseRecording:a,resumeRecording:d,initRecorder:o,setRecordingDuration:function(e,t){if("undefined"===typeof e)throw"recordingDuration is required.";if("number"!==typeof e)throw"recordingDuration must be a number.";return i.recordingDuration=e,i.onRecordingStopped=t||function(){},{onRecordingStopped:function(e){i.onRecordingStopped=e}}},clearRecordedData:function(){m?(m.clearRecordedData(),t.disableLogs):v()},getBlob:function(){if(m)return m.blob;v()},getDataURL:l,toURL:function(){if(m)return b.createObjectURL(m.blob);v()},getInternalRecorder:function(){return m},save:function(e){m?C(m.blob,e):v()},getFromDisk:function(e){m?s.getFromDisk(t.type,e):v()},setAdvertisementArray:function(e){t.advertisement=[];for(var i=e.length,n=0;n<i;n++)t.advertisement.push({duration:n,image:e[n]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){"recording"!==i.state||t.disableLogs||console.warn("Stop an active recorder."),m&&"function"===typeof m.clearRecordedData&&m.clearRecordedData(),m=null,p("inactive"),i.blob=null},onStateChanged:function(e){t.disableLogs},state:"inactive",getState:function(){return i.state},destroy:function(){var e=t.disableLogs;t={disableLogs:!0},i.reset(),p("destroyed"),w=i=null,M.AudioContextConstructor&&(M.AudioContextConstructor.close(),M.AudioContextConstructor=null),t.disableLogs=e,t.disableLogs},version:"5.5.9"};if(!this)return i=w,w;for(var y in w)this[y]=w[y];return i=this,w}
/**
 * {@link RecordRTCConfiguration} is an inner/private helper for {@link RecordRTC}.
 * @summary It configures the 2nd parameter passed over {@link RecordRTC} and returns a valid "config" object.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCConfiguration
 * @class
 * @example
 * var options = RecordRTCConfiguration(mediaStream, options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, getNativeBlob:true, etc.}
 */
function c(e,t){return t.recorderType||t.type||(t.audio&&t.video?t.type="video":t.audio&&!t.video&&(t.type="audio")),t.recorderType&&!t.type&&(t.recorderType===I||t.recorderType===B||"undefined"!==typeof q&&t.recorderType===q?t.type="video":t.recorderType===F?t.type="gif":t.recorderType===x?t.type="audio":t.recorderType===U&&(T(e,"audio").length&&T(e,"video").length||!T(e,"audio").length&&T(e,"video").length?t.type="video":T(e,"audio").length&&!T(e,"video").length&&(t.type="audio"))),"undefined"!==typeof U&&"undefined"!==typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(t.mimeType||(t.mimeType="video/webm"),t.type||(t.type=t.mimeType.split("/")[0]),t.bitsPerSecond),t.type||(t.mimeType&&(t.type=t.mimeType.split("/")[0]),t.type||(t.type="audio")),t}
/**
 * {@link GetRecorderType} is an inner/private helper for {@link RecordRTC}.
 * @summary It returns best recorder-type available for your browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GetRecorderType
 * @class
 * @example
 * var RecorderType = GetRecorderType(options);
 * var recorder = new RecorderType(options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 */function u(e,t){var i;return(R||v||w)&&(i=x),"undefined"!==typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&!R&&(i=U),"video"===t.type&&(R||w)&&(i=I,"undefined"!==typeof q&&"undefined"!==typeof ReadableStream&&(i=q)),"gif"===t.type&&(i=F),"canvas"===t.type&&(i=B),D()&&i!==B&&i!==F&&"undefined"!==typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(T(e,"video").length||T(e,"audio").length)&&("audio"===t.type?"function"===typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("audio/webm")&&(i=U):"function"===typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("video/webm")&&(i=U)),e instanceof Array&&e.length&&(i=W),t.recorderType&&(i=t.recorderType),!t.disableLogs&&i&&i.name,!i&&S&&(i=U),i}
/**
 * MRecordRTC runs on top of {@link RecordRTC} to bring multiple recordings in a single place, by providing simple API.
 * @summary MRecordRTC stands for "Multiple-RecordRTC".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MRecordRTC
 * @class
 * @example
 * var recorder = new MRecordRTC();
 * recorder.addStream(MediaStream);
 * recorder.mediaType = {
 *     audio: true, // or StereoAudioRecorder or MediaStreamRecorder
 *     video: true, // or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder
 *     gif: true    // or GifRecorder
 * };
 * // mimeType is optional and should be set only in advance cases.
 * recorder.mimeType = {
 *     audio: 'audio/wav',
 *     video: 'video/webm',
 *     gif:   'image/gif'
 * };
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC/tree/master/MRecordRTC|MRecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @requires {@link RecordRTC}
 */function f(e){this.addStream=function(t){t&&(e=t)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var t,i=this.mediaType,n=this.mimeType||{audio:null,video:null,gif:null};if("function"!==typeof i.audio&&D()&&!T(e,"audio").length&&(i.audio=!1),"function"!==typeof i.video&&D()&&!T(e,"video").length&&(i.video=!1),"function"!==typeof i.gif&&D()&&!T(e,"video").length&&(i.gif=!1),!i.audio&&!i.video&&!i.gif)throw"MediaStream must have either audio or video tracks.";if(i.audio&&(t=null,"function"===typeof i.audio&&(t=i.audio),this.audioRecorder=new s(e,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:t,mimeType:n.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),i.video||this.audioRecorder.startRecording()),i.video){t=null,"function"===typeof i.video&&(t=i.video);var o=e;if(D()&&i.audio&&"function"===typeof i.audio){var r=T(e,"video")[0];y?(o=new k,o.addTrack(r),t&&t===I&&(t=U)):(o=new k,o.addTrack(r))}this.videoRecorder=new s(o,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:t,mimeType:n.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),i.audio||this.videoRecorder.startRecording()}if(i.audio&&i.video){var a=this,d=!0===D();(i.audio instanceof x&&i.video||!0!==i.audio&&!0!==i.video&&i.audio!==i.video)&&(d=!1),!0===d?(a.audioRecorder=null,a.videoRecorder.startRecording()):a.videoRecorder.initRecorder((function(){a.audioRecorder.initRecorder((function(){a.videoRecorder.startRecording(),a.audioRecorder.startRecording()}))}))}i.gif&&(t=null,"function"===typeof i.gif&&(t=i.gif),this.gifRecorder=new s(e,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:t,mimeType:n.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(e){e=e||function(){},this.audioRecorder&&this.audioRecorder.stopRecording((function(t){e(t,"audio")})),this.videoRecorder&&this.videoRecorder.stopRecording((function(t){e(t,"video")})),this.gifRecorder&&this.gifRecorder.stopRecording((function(t){e(t,"gif")}))},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(e){var t={};return this.audioRecorder&&(t.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(t.video=this.videoRecorder.getBlob()),this.gifRecorder&&(t.gif=this.gifRecorder.getBlob()),e&&e(t),t},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(e){function t(e,t){if("undefined"!==typeof Worker){var n=i((function(e){postMessage((new FileReaderSync).readAsDataURL(e))}));n.onmessage=function(e){t(e.data)},n.postMessage(e)}else{var o=new FileReader;o.readAsDataURL(e),o.onload=function(e){t(e.target.result)}}}function i(e){var t,i=b.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),n=new Worker(i);if("undefined"!==typeof b)t=b;else{if("undefined"===typeof webkitURL)throw"Neither URL nor webkitURL detected.";t=webkitURL}return t.revokeObjectURL(i),n}this.getBlob((function(i){i.audio&&i.video?t(i.audio,(function(n){t(i.video,(function(t){e({audio:n,video:t})}))})):i.audio?t(i.audio,(function(t){e({audio:t})})):i.video&&t(i.video,(function(t){e({video:t})}))}))},this.writeToDisk=function(){s.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(e){e=e||{audio:!0,video:!0,gif:!0},e.audio&&this.audioRecorder&&this.audioRecorder.save("string"===typeof e.audio?e.audio:""),e.video&&this.videoRecorder&&this.videoRecorder.save("string"===typeof e.video?e.video:""),e.gif&&this.gifRecorder&&this.gifRecorder.save("string"===typeof e.gif?e.gif:"")}}i("d3b7"),i("159b"),i("b64b"),i("25f0"),i("b0c0"),i("ac1f"),i("5319"),i("1276"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),i("00b4"),i("4de4"),i("d9e2"),i("fb6a"),i("a9e3"),i("b680"),i("4a9b"),i("907a"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("c19f"),i("cfc3"),i("466d"),i("99af"),i("d81d"),i("5cc6"),i("a15b"),i("81b2"),i("0eb6"),i("b7ef"),i("8bd4"),i("e9c4"),s.version="5.5.9",e.exports=s,r=[],a=function(){return s}.apply(t,r),void 0===a||(e.exports=a),s.getFromDisk=function(e,t){if(!t)throw"callback is mandatory.";P.Fetch((function(i,n){"all"!==e&&n===e+"Blob"&&t&&t(i),"all"===e&&t&&t(i,n.replace("Blob",""))}))},s.writeToDisk=function(e){e=e||{},e.audio&&e.video&&e.gif?e.audio.getDataURL((function(t){e.video.getDataURL((function(i){e.gif.getDataURL((function(e){P.Store({audioBlob:t,videoBlob:i,gifBlob:e})}))}))})):e.audio&&e.video?e.audio.getDataURL((function(t){e.video.getDataURL((function(e){P.Store({audioBlob:t,videoBlob:e})}))})):e.audio&&e.gif?e.audio.getDataURL((function(t){e.gif.getDataURL((function(e){P.Store({audioBlob:t,gifBlob:e})}))})):e.video&&e.gif?e.video.getDataURL((function(t){e.gif.getDataURL((function(e){P.Store({videoBlob:t,gifBlob:e})}))})):e.audio?e.audio.getDataURL((function(e){P.Store({audioBlob:e})})):e.video?e.video.getDataURL((function(e){P.Store({videoBlob:e})})):e.gif&&e.gif.getDataURL((function(e){P.Store({gifBlob:e})}))},f.getFromDisk=s.getFromDisk,f.writeToDisk=s.writeToDisk,"undefined"!==typeof s&&(s.MRecordRTC=f);var l="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(e){e&&"undefined"===typeof window&&"undefined"!==typeof n&&(n.navigator={userAgent:l,getUserMedia:function(){}},n.console||(n.console={}),"undefined"!==typeof n.console.log&&"undefined"!==typeof n.console.error||(n.console.error=n.console.log=n.console.log||function(){}),"undefined"===typeof document&&(e.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return e},e.HTMLVideoElement=function(){}),"undefined"===typeof location&&(e.location={protocol:"file:",href:"",hash:""}),"undefined"===typeof screen&&(e.screen={width:0,height:0}),"undefined"===typeof b&&(e.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),e.window=n)})("undefined"!==typeof n?n:null);var h=window.requestAnimationFrame;if("undefined"===typeof h)if("undefined"!==typeof webkitRequestAnimationFrame)h=webkitRequestAnimationFrame;else if("undefined"!==typeof mozRequestAnimationFrame)h=mozRequestAnimationFrame;else if("undefined"!==typeof msRequestAnimationFrame)h=msRequestAnimationFrame;else if("undefined"===typeof h){var p=0;h=function(e,t){var i=(new Date).getTime(),n=Math.max(0,16-(i-p)),o=setTimeout((function(){e(i+n)}),n);return p=i+n,o}}var m=window.cancelAnimationFrame;"undefined"===typeof m&&("undefined"!==typeof webkitCancelAnimationFrame?m=webkitCancelAnimationFrame:"undefined"!==typeof mozCancelAnimationFrame?m=mozCancelAnimationFrame:"undefined"!==typeof msCancelAnimationFrame?m=msCancelAnimationFrame:"undefined"===typeof m&&(m=function(e){clearTimeout(e)}));var g=window.AudioContext;"undefined"===typeof g&&("undefined"!==typeof webkitAudioContext&&(g=webkitAudioContext),"undefined"!==typeof mozAudioContext&&(g=mozAudioContext));var b=window.URL;"undefined"===typeof b&&"undefined"!==typeof webkitURL&&(b=webkitURL),"undefined"!==typeof navigator&&"undefined"===typeof navigator.getUserMedia&&("undefined"!==typeof navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),"undefined"!==typeof navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var v=-1!==navigator.userAgent.indexOf("Edge")&&(!!navigator.msSaveBlob||!!navigator.msSaveOrOpenBlob),w=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),y=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),R=!w&&!v&&!!navigator.webkitGetUserMedia||O()||-1!==navigator.userAgent.toLowerCase().indexOf("chrome/"),S=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);S&&!R&&-1!==navigator.userAgent.indexOf("CriOS")&&(S=!1,R=!0);var k=window.MediaStream;function A(e){var t=1e3,i=["Bytes","KB","MB","GB","TB"];if(0===e)return"0 Bytes";var n=parseInt(Math.floor(Math.log(e)/Math.log(t)),10);return(e/Math.pow(t,n)).toPrecision(3)+" "+i[n]}function C(e,t){if(!e)throw"Blob object is required.";if(!e.type)try{e.type="video/webm"}catch(a){}var i=(e.type||"video/webm").split("/")[1];if(t&&-1!==t.indexOf(".")){var n=t.split(".");t=n[0],i=n[1]}var o=(t||Math.round(9999999999*Math.random())+888888888)+"."+i;if("undefined"!==typeof navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(e,o);if("undefined"!==typeof navigator.msSaveBlob)return navigator.msSaveBlob(e,o);var r=document.createElement("a");r.href=b.createObjectURL(e),r.download=o,r.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(r),"function"===typeof r.click?r.click():(r.target="_blank",r.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),b.revokeObjectURL(r.href)}function O(){return"undefined"!==typeof window&&"object"===d(window.process)&&"renderer"===window.process.type||(!("undefined"===typeof o||"object"!==d(o.versions)||!o.versions.electron)||"object"===("undefined"===typeof navigator?"undefined":d(navigator))&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}function T(e,t){return e&&e.getTracks?e.getTracks().filter((function(e){return e.kind===(t||"audio")})):[]}function L(e,t){"srcObject"in t?t.srcObject=e:"mozSrcObject"in t?t.mozSrcObject=e:t.srcObject=e}function j(e,t){if("undefined"===typeof EBML)throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var i=new EBML.Reader,n=new EBML.Decoder,o=EBML.tools,r=new FileReader;r.onload=function(e){var r=n.decode(this.result);r.forEach((function(e){i.read(e)})),i.stop();var a=o.makeMetadataSeekable(i.metadatas,i.duration,i.cues),d=this.result.slice(i.metadataSize),s=new Blob([a,d],{type:"video/webm"});t(s)},r.readAsArrayBuffer(e)}"undefined"===typeof k&&"undefined"!==typeof webkitMediaStream&&(k=webkitMediaStream),"undefined"!==typeof k&&"undefined"===typeof k.prototype.stop&&(k.prototype.stop=function(){this.getTracks().forEach((function(e){e.stop()}))}),"undefined"!==typeof s&&(s.invokeSaveAsDialog=C,s.getTracks=T,s.getSeekableBlob=j,s.bytesToSize=A,s.isElectron=O);
/**
 * Storage is a standalone object used by {@link RecordRTC} to store reusable objects e.g. "new AudioContext".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * Storage.AudioContext === webkitAudioContext
 * @property {webkitAudioContext} AudioContext - Keeps a reference to AudioContext object.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */
var M={};function D(){if(y||S||v)return!0;navigator.appVersion;var e,t,i=navigator.userAgent,n=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10);return(R||w)&&(e=i.indexOf("Chrome"),n=i.substring(e+7)),-1!==(t=n.indexOf(";"))&&(n=n.substring(0,t)),-1!==(t=n.indexOf(" "))&&(n=n.substring(0,t)),o=parseInt(""+n,10),isNaN(o)&&(n=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10)),o>=49}
/**
 * MediaStreamRecorder is an abstraction layer for {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}. It is used by {@link RecordRTC} to record MediaStream(s) in both Chrome and Firefox.
 * @summary Runs top over {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://github.com/muaz-khan|Muaz Khan}
 * @typedef MediaStreamRecorder
 * @class
 * @example
 * var config = {
 *     mimeType: 'video/webm', // vp8, vp9, h264, mkv, opus/vorbis
 *     audioBitsPerSecond : 256 * 8 * 1024,
 *     videoBitsPerSecond : 256 * 8 * 1024,
 *     bitsPerSecond: 256 * 8 * 1024,  // if this is provided, skip above two
 *     checkForInactiveTracks: true,
 *     timeSlice: 1000, // concatenate intervals based blobs
 *     ondataavailable: function() {} // get intervals based blobs
 * }
 * var recorder = new MediaStreamRecorder(mediaStream, config);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs:true, initCallback: function, mimeType: "video/webm", timeSlice: 1000}
 * @throws Will throw an error if first argument "MediaStream" is missing. Also throws error if "MediaRecorder API" are not supported by the browser.
 */function U(e,t){var i=this;if("undefined"===typeof e)throw'First argument "MediaStream" is required.';if("undefined"===typeof MediaRecorder)throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";if(t=t||{mimeType:"video/webm"},"audio"===t.type){var n;if(T(e,"video").length&&T(e,"audio").length)navigator.mozGetUserMedia?(n=new k,n.addTrack(T(e,"audio")[0])):n=new k(T(e,"audio")),e=n;t.mimeType&&-1!==t.mimeType.toString().toLowerCase().indexOf("audio")||(t.mimeType=R?"audio/webm":"audio/ogg"),t.mimeType&&"audio/ogg"!==t.mimeType.toString().toLowerCase()&&navigator.mozGetUserMedia&&(t.mimeType="audio/ogg")}var o,r=[];function a(){i.timestamps.push((new Date).getTime()),"function"===typeof t.onTimeStamp&&t.onTimeStamp(i.timestamps[i.timestamps.length-1],i.timestamps)}function d(e){return o&&o.mimeType?o.mimeType:e.mimeType||"video/webm"}function s(){r=[],o=null,i.timestamps=[]}function c(){if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}this.getArrayOfBlobs=function(){return r},this.record=function(){i.blob=null,i.clearRecordedData(),i.timestamps=[],u=[],r=[];var n=t;t.disableLogs,o&&(o=null),R&&!D()&&(n="video/vp8"),"function"===typeof MediaRecorder.isTypeSupported&&n.mimeType&&(MediaRecorder.isTypeSupported(n.mimeType)||(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",n.mimeType),n.mimeType="audio"===t.type?"audio/webm":"video/webm"));try{o=new MediaRecorder(e,n),t.mimeType=n.mimeType}catch(s){o=new MediaRecorder(e)}n.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in o&&!1===o.canRecordMimeType(n.mimeType)&&(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",n.mimeType)),o.ondataavailable=function(e){if(e.data&&u.push("ondataavailable: "+A(e.data.size)),"number"!==typeof t.timeSlice)!e.data||!e.data.size||e.data.size<100||i.blob?i.recordingCallback&&(i.recordingCallback(new Blob([],{type:d(n)})),i.recordingCallback=null):(i.blob=t.getNativeBlob?e.data:new Blob([e.data],{type:d(n)}),i.recordingCallback&&(i.recordingCallback(i.blob),i.recordingCallback=null));else if(e.data&&e.data.size&&e.data.size>100&&(r.push(e.data),a(),"function"===typeof t.ondataavailable)){var o=t.getNativeBlob?e.data:new Blob([e.data],{type:d(n)});t.ondataavailable(o)}},o.onstart=function(){u.push("started")},o.onpause=function(){u.push("paused")},o.onresume=function(){u.push("resumed")},o.onstop=function(){u.push("stopped")},o.onerror=function(e){e&&(e.name||(e.name="UnknownError"),u.push("error: "+e),t.disableLogs||(-1!==e.name.toString().toLowerCase().indexOf("invalidstate")?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",e):-1!==e.name.toString().toLowerCase().indexOf("notsupported")?console.error("MIME type (",n.mimeType,") is not supported.",e):-1!==e.name.toString().toLowerCase().indexOf("security")?console.error("MediaRecorder security error",e):"OutOfMemory"===e.name?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"IllegalStreamModification"===e.name?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"OtherRecordingError"===e.name?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"GenericError"===e.name?console.error("The UA cannot provide the codec or recording option that has been requested.",e):console.error("MediaRecorder Error",e)),function(e){if(!i.manuallyStopped&&o&&"inactive"===o.state)return delete t.timeslice,void o.start(6e5);setTimeout(e,1e3)}(),"inactive"!==o.state&&"stopped"!==o.state&&o.stop())},"number"===typeof t.timeSlice?(a(),o.start(t.timeSlice)):o.start(36e5),t.initCallback&&t.initCallback()},this.timestamps=[],this.stop=function(e){e=e||function(){},i.manuallyStopped=!0,o&&(this.recordingCallback=e,"recording"===o.state&&o.stop(),"number"===typeof t.timeSlice&&setTimeout((function(){i.blob=new Blob(r,{type:d(t)}),i.recordingCallback(i.blob)}),100))},this.pause=function(){o&&"recording"===o.state&&o.pause()},this.resume=function(){o&&"paused"===o.state&&o.resume()},this.clearRecordedData=function(){o&&"recording"===o.state&&i.stop(s),s()},this.getInternalRecorder=function(){return o},this.blob=null,this.getState=function(){return o&&o.state||"inactive"};var u=[];this.getAllStates=function(){return u},"undefined"===typeof t.checkForInactiveTracks&&(t.checkForInactiveTracks=!1);i=this;(function e(){if(o&&!1!==t.checkForInactiveTracks)return!1===c()?(t.disableLogs,void i.stop()):void setTimeout(e,1e3)})(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}
/**
 * StereoAudioRecorder is a standalone class used by {@link RecordRTC} to bring "stereo" audio-recording in chrome.
 * @summary JavaScript standalone object for stereo audio recording.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef StereoAudioRecorder
 * @class
 * @example
 * var recorder = new StereoAudioRecorder(MediaStream, {
 *     sampleRate: 44100,
 *     bufferSize: 4096
 * });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {sampleRate: 44100, bufferSize: 4096, numberOfAudioChannels: 1, etc.}
 */
function x(e,t){if(!T(e,"audio").length)throw"Your stream has no audio tracks.";t=t||{};var i,n=this,o=[],r=[],a=!1,d=0,s=2,c=t.desiredSampRate;function u(){if(!1===t.checkForInactiveTracks)return!0;if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}function f(e,t){function i(e,t){var i,n=e.numberOfAudioChannels,o=e.leftBuffers.slice(0),r=e.rightBuffers.slice(0),a=e.sampleRate,d=e.internalInterleavedLength,s=e.desiredSampRate;function c(e,t,i){var n=Math.round(e.length*(t/i)),o=[],r=Number((e.length-1)/(n-1));o[0]=e[0];for(var a=1;a<n-1;a++){var d=a*r,s=Number(Math.floor(d)).toFixed(),c=Number(Math.ceil(d)).toFixed(),f=d-s;o[a]=u(e[s],e[c],f)}return o[n-1]=e[e.length-1],o}function u(e,t,i){return e+(t-e)*i}function f(e,t){for(var i=new Float64Array(t),n=0,o=e.length,r=0;r<o;r++){var a=e[r];i.set(a,n),n+=a.length}return i}function l(e,t){for(var i=e.length+t.length,n=new Float64Array(i),o=0,r=0;r<i;)n[r++]=e[o],n[r++]=t[o],o++;return n}function h(e,t,i){for(var n=i.length,o=0;o<n;o++)e.setUint8(t+o,i.charCodeAt(o))}2===n&&(o=f(o,d),r=f(r,d),s&&(o=c(o,s,a),r=c(r,s,a))),1===n&&(o=f(o,d),s&&(o=c(o,s,a))),s&&(a=s),2===n&&(i=l(o,r)),1===n&&(i=o);var p=i.length,m=44+2*p,g=new ArrayBuffer(m),b=new DataView(g);h(b,0,"RIFF"),b.setUint32(4,36+2*p,!0),h(b,8,"WAVE"),h(b,12,"fmt "),b.setUint32(16,16,!0),b.setUint16(20,1,!0),b.setUint16(22,n,!0),b.setUint32(24,a,!0),b.setUint32(28,2*a,!0),b.setUint16(32,2*n,!0),b.setUint16(34,16,!0),h(b,36,"data"),b.setUint32(40,2*p,!0);for(var v=p,w=44,y=1,R=0;R<v;R++)b.setInt16(w,i[R]*(32767*y),!0),w+=2;if(t)return t({buffer:g,view:b});postMessage({buffer:g,view:b})}if(e.noWorker)i(e,(function(e){t(e.buffer,e.view)}));else{var n=l(i);n.onmessage=function(e){t(e.data.buffer,e.data.view),b.revokeObjectURL(n.workerURL),n.terminate()},n.postMessage(e)}}function l(e){var t=b.createObjectURL(new Blob([e.toString(),";this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),i=new Worker(t);return i.workerURL=t,i}if(!0===t.leftChannel&&(s=1),1===t.numberOfAudioChannels&&(s=1),(!s||s<1)&&(s=2),t.disableLogs,"undefined"===typeof t.checkForInactiveTracks&&(t.checkForInactiveTracks=!0),this.record=function(){if(!1===u())throw"Please make sure MediaStream is active.";R(),k=y=!1,a=!0,"undefined"!==typeof t.timeSlice&&O()},this.stop=function(e){e=e||function(){},a=!1,f({desiredSampRate:c,sampleRate:w,numberOfAudioChannels:s,internalInterleavedLength:d,leftBuffers:o,rightBuffers:1===s?[]:r,noWorker:t.noWorker},(function(t,i){n.blob=new Blob([i],{type:"audio/wav"}),n.buffer=new ArrayBuffer(i.buffer.byteLength),n.view=i,n.sampleRate=c||w,n.bufferSize=v,n.length=d,k=!1,e&&e(n.blob)}))},"undefined"===typeof h)var h={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext};h.AudioContextConstructor||(h.AudioContextConstructor=new h.AudioContext);var p=h.AudioContextConstructor,m=p.createMediaStreamSource(e),g=[0,256,512,1024,2048,4096,8192,16384],v="undefined"===typeof t.bufferSize?4096:t.bufferSize;if(-1===g.indexOf(v)&&t.disableLogs,p.createJavaScriptNode)i=p.createJavaScriptNode(v,s,s);else{if(!p.createScriptProcessor)throw"WebAudio API has no support on this browser.";i=p.createScriptProcessor(v,s,s)}m.connect(i),t.bufferSize||(v=i.bufferSize);var w="undefined"!==typeof t.sampleRate?t.sampleRate:p.sampleRate||44100;(w<22050||w>96e3)&&t.disableLogs,t.disableLogs||t.desiredSampRate;var y=!1;function R(){o=[],r=[],d=0,k=!1,a=!1,y=!1,p=null,n.leftchannel=o,n.rightchannel=r,n.numberOfAudioChannels=s,n.desiredSampRate=c,n.sampleRate=w,n.recordingLength=d,C={left:[],right:[],recordingLength:0}}function S(){i&&(i.onaudioprocess=null,i.disconnect(),i=null),m&&(m.disconnect(),m=null),R()}this.pause=function(){y=!0},this.resume=function(){if(!1===u())throw"Please make sure MediaStream is active.";if(!a)return t.disableLogs,void this.record();y=!1},this.clearRecordedData=function(){t.checkForInactiveTracks=!1,a&&this.stop(S),S()},this.name="StereoAudioRecorder",this.toString=function(){return this.name};var k=!1;function A(e){if(!y)if(!1===u()&&(t.disableLogs,i.disconnect(),a=!1),a){k||(k=!0,t.onAudioProcessStarted&&t.onAudioProcessStarted(),t.initCallback&&t.initCallback());var c=e.inputBuffer.getChannelData(0),f=new Float32Array(c);if(o.push(f),2===s){var l=e.inputBuffer.getChannelData(1),h=new Float32Array(l);r.push(h)}d+=v,n.recordingLength=d,"undefined"!==typeof t.timeSlice&&(C.recordingLength+=v,C.left.push(f),2===s&&C.right.push(h))}else m&&(m.disconnect(),m=null)}i.onaudioprocess=A,p.createMediaStreamDestination?i.connect(p.createMediaStreamDestination()):i.connect(p.destination),this.leftchannel=o,this.rightchannel=r,this.numberOfAudioChannels=s,this.desiredSampRate=c,this.sampleRate=w,n.recordingLength=d;var C={left:[],right:[],recordingLength:0};function O(){a&&"function"===typeof t.ondataavailable&&"undefined"!==typeof t.timeSlice&&(C.left.length?(f({desiredSampRate:c,sampleRate:w,numberOfAudioChannels:s,internalInterleavedLength:C.recordingLength,leftBuffers:C.left,rightBuffers:1===s?[]:C.right},(function(e,i){var n=new Blob([i],{type:"audio/wav"});t.ondataavailable(n),setTimeout(O,t.timeSlice)})),C={left:[],right:[],recordingLength:0}):setTimeout(O,t.timeSlice))}}
/**
 * CanvasRecorder is a standalone class used by {@link RecordRTC} to bring HTML5-Canvas recording into video WebM. It uses HTML2Canvas library and runs top over {@link Whammy}.
 * @summary HTML2Canvas recording into video WebM.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef CanvasRecorder
 * @class
 * @example
 * var recorder = new CanvasRecorder(htmlElement, { disableLogs: true, useWhammyRecorder: true });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {HTMLElement} htmlElement - querySelector/getElementById/getElementsByTagName[0]/etc.
 * @param {object} config - {disableLogs:true, initCallback: function}
 */
function B(e,t){if("undefined"===typeof html2canvas)throw"Please link: https://www.webrtc-experiment.com/screenshot.js";t=t||{},t.frameInterval||(t.frameInterval=10);var i=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach((function(e){e in document.createElement("canvas")&&(i=!0)}));var n,o,r,a=(!!window.webkitRTCPeerConnection||!!window.webkitGetUserMedia)&&!!window.chrome,d=50,s=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(a&&s&&s[2]&&(d=parseInt(s[2],10)),a&&d<52&&(i=!1),t.useWhammyRecorder&&(i=!1),i)if(t.disableLogs,e instanceof HTMLCanvasElement)n=e;else{if(!(e instanceof CanvasRenderingContext2D))throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";n=e.canvas}else navigator.mozGetUserMedia&&(t.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));this.record=function(){if(r=!0,i&&!t.useWhammyRecorder){var e;"captureStream"in n?e=n.captureStream(25):"mozCaptureStream"in n?e=n.mozCaptureStream(25):"webkitCaptureStream"in n&&(e=n.webkitCaptureStream(25));try{var a=new k;a.addTrack(T(e,"video")[0]),e=a}catch(d){}if(!e)throw"captureStream API are NOT available.";o=new U(e,{mimeType:t.mimeType||"video/webm"}),o.record()}else p.frames=[],h=(new Date).getTime(),l();t.initCallback&&t.initCallback()},this.getWebPImages=function(i){if("canvas"===e.nodeName.toLowerCase()){var n=p.frames.length;p.frames.forEach((function(e,i){var o=n-i;t.disableLogs,t.onEncodingCallback&&t.onEncodingCallback(o,n);var r=e.image.toDataURL("image/webp",1);p.frames[i].image=r})),t.disableLogs,i()}else i()},this.stop=function(e){r=!1;var n=this;i&&o?o.stop(e):this.getWebPImages((function(){p.compile((function(i){t.disableLogs,n.blob=i,n.blob.forEach&&(n.blob=new Blob([],{type:"video/webm"})),e&&e(n.blob),p.frames=[]}))}))};var c=!1;function u(){p.frames=[],r=!1,c=!1}function f(){var t=document.createElement("canvas"),i=t.getContext("2d");return t.width=e.width,t.height=e.height,i.drawImage(e,0,0),t}function l(){if(c)return h=(new Date).getTime(),setTimeout(l,500);if("canvas"===e.nodeName.toLowerCase()){var i=(new Date).getTime()-h;return h=(new Date).getTime(),p.frames.push({image:f(),duration:i}),void(r&&setTimeout(l,t.frameInterval))}html2canvas(e,{grabMouse:"undefined"===typeof t.showMousePointer||t.showMousePointer,onrendered:function(e){var i=(new Date).getTime()-h;if(!i)return setTimeout(l,t.frameInterval);h=(new Date).getTime(),p.frames.push({image:e.toDataURL("image/webp",1),duration:i}),r&&setTimeout(l,t.frameInterval)}})}this.pause=function(){c=!0,o instanceof U&&o.pause()},this.resume=function(){c=!1,o instanceof U?o.resume():r||this.record()},this.clearRecordedData=function(){r&&this.stop(u),u()},this.name="CanvasRecorder",this.toString=function(){return this.name};var h=(new Date).getTime(),p=new E.Video(100)}
/**
 * WhammyRecorder is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It runs top over {@link Whammy}.
 * @summary Video recording feature in Chrome.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WhammyRecorder
 * @class
 * @example
 * var recorder = new WhammyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs: true, initCallback: function, video: HTMLVideoElement, etc.}
 */
function I(e,t){function i(e){e="undefined"!==typeof e?e:10;var t=(new Date).getTime()-c;return t?a?(c=(new Date).getTime(),setTimeout(i,100)):(c=(new Date).getTime(),s.paused&&s.play(),l.drawImage(s,0,0,f.width,f.height),u.frames.push({duration:t,image:f.toDataURL("image/webp")}),void(r||setTimeout(i,e,e))):setTimeout(i,e,e)}function n(e){var t=-1,i=e.length;(function n(){t++,t!==i?setTimeout((function(){e.functionToLoop(n,t)}),1):e.callback()})()}function o(e,t,i,o,r){var a=document.createElement("canvas");a.width=f.width,a.height=f.height;var d=a.getContext("2d"),s=[],c=-1===t,u=t&&t>0&&t<=e.length?t:e.length,l={r:0,g:0,b:0},h=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),p=i&&i>=0&&i<=1?i:0,m=o&&o>=0&&o<=1?o:0,g=!1;n({length:u,functionToLoop:function(t,i){var n,o,r,a=function(){!g&&r-n<=r*m||(c&&(g=!0),s.push(e[i])),t()};if(g)a();else{var u=new Image;u.onload=function(){d.drawImage(u,0,0,f.width,f.height);var e=d.getImageData(0,0,f.width,f.height);n=0,o=e.data.length,r=e.data.length/4;for(var t=0;t<o;t+=4){var i={r:e.data[t],g:e.data[t+1],b:e.data[t+2]},s=Math.sqrt(Math.pow(i.r-l.r,2)+Math.pow(i.g-l.g,2)+Math.pow(i.b-l.b,2));s<=h*p&&n++}a()},u.src=e[i].image}},callback:function(){s=s.concat(e.slice(u)),s.length<=0&&s.push(e[e.length-1]),r(s)}})}t=t||{},t.frameInterval||(t.frameInterval=10),t.disableLogs,this.record=function(){t.width||(t.width=320),t.height||(t.height=240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),f.width=t.canvas.width||320,f.height=t.canvas.height||240,l=f.getContext("2d"),t.video&&t.video instanceof HTMLVideoElement?(s=t.video.cloneNode(),t.initCallback&&t.initCallback()):(s=document.createElement("video"),L(e,s),s.onloadedmetadata=function(){t.initCallback&&t.initCallback()},s.width=t.video.width,s.height=t.video.height),s.muted=!0,s.play(),c=(new Date).getTime(),u=new E.Video,t.disableLogs,i(t.frameInterval)};var r=!1;this.stop=function(e){e=e||function(){},r=!0;var i=this;setTimeout((function(){o(u.frames,-1,null,null,(function(n){u.frames=n,t.advertisement&&t.advertisement.length&&(u.frames=t.advertisement.concat(u.frames)),u.compile((function(t){i.blob=t,i.blob.forEach&&(i.blob=new Blob([],{type:"video/webm"})),e&&e(i.blob)}))}))}),10)};var a=!1;function d(){u.frames=[],r=!0,a=!1}this.pause=function(){a=!0},this.resume=function(){a=!1,r&&this.record()},this.clearRecordedData=function(){r||this.stop(d),d()},this.name="WhammyRecorder",this.toString=function(){return this.name};var s,c,u,f=document.createElement("canvas"),l=f.getContext("2d")}"undefined"!==typeof g?M.AudioContext=g:"undefined"!==typeof webkitAudioContext&&(M.AudioContext=webkitAudioContext),"undefined"!==typeof s&&(s.Storage=M),"undefined"!==typeof s&&(s.MediaStreamRecorder=U),"undefined"!==typeof s&&(s.StereoAudioRecorder=x),"undefined"!==typeof s&&(s.CanvasRecorder=B),"undefined"!==typeof s&&(s.WhammyRecorder=I);
/**
 * Whammy is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It is written by {@link https://github.com/antimatter15|antimatter15}
 * @summary A real time javascript webm encoder based on a canvas hack.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef Whammy
 * @class
 * @example
 * var recorder = new Whammy().Video(15);
 * recorder.add(context || canvas || dataURL);
 * var output = recorder.compile();
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */
var E=function(){function e(e){this.frames=[],this.duration=e||1,this.quality=.8}function t(e){var t=b.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),i=new Worker(t);return b.revokeObjectURL(t),i}function i(e){function t(e){var t=n(e);if(!t)return[];var o=3e4,r=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:h(t.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:t.width,id:176},{data:t.height,id:186}]}]}]}]}],a=0,d=0;while(a<e.length){var c=[],u=0;do{c.push(e[a]),u+=e[a].duration,a++}while(a<e.length&&u<o);var f=0,l={id:524531317,data:i(d,f,c)};r[1].data.push(l),d+=u}return s(r)}function i(e,t,i){return[{data:e,id:231}].concat(i.map((function(e){var i=c({discardable:0,frame:e.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(t)});return t+=e.duration,{data:i,id:163}})))}function n(e){if(e[0]){for(var t=e[0].width,i=e[0].height,n=e[0].duration,o=1;o<e.length;o++)n+=e[o].duration;return{duration:n,width:t,height:i}}postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."})}function o(e){var t=[];while(e>0)t.push(255&e),e>>=8;return new Uint8Array(t.reverse())}function r(e){return new Uint8Array(e.split("").map((function(e){return e.charCodeAt(0)})))}function a(e){var t=[],i=e.length%8?new Array(9-e.length%8).join("0"):"";e=i+e;for(var n=0;n<e.length;n+=8)t.push(parseInt(e.substr(n,8),2));return new Uint8Array(t)}function s(e){for(var t=[],i=0;i<e.length;i++){var n=e[i].data;"object"===d(n)&&(n=s(n)),"number"===typeof n&&(n=a(n.toString(2))),"string"===typeof n&&(n=r(n));var c=n.size||n.byteLength||n.length,u=Math.ceil(Math.ceil(Math.log(c)/Math.log(2))/8),f=c.toString(2),l=new Array(7*u+7+1-f.length).join("0")+f,h=new Array(u).join("0")+"1"+l;t.push(o(e[i].id)),t.push(a(h)),t.push(n)}return new Blob(t,{type:"video/webm"})}function c(e){var t=0;if(e.keyframe&&(t|=128),e.invisible&&(t|=8),e.lacing&&(t|=e.lacing<<1),e.discardable&&(t|=1),e.trackNum>127)throw"TrackNumber > 127 not supported";var i=[128|e.trackNum,e.timecode>>8,255&e.timecode,t].map((function(e){return String.fromCharCode(e)})).join("")+e.frame;return i}function u(e){for(var t,i,n,o=e.RIFF[0].WEBP[0],r=o.indexOf("*"),a=0,d=[];a<4;a++)d[a]=o.charCodeAt(r+3+a);return n=d[1]<<8|d[0],t=16383&n,n=d[3]<<8|d[2],i=16383&n,{width:t,height:i,data:o,riff:e}}function f(e,t){return parseInt(e.substr(t+4,4).split("").map((function(e){var t=e.charCodeAt(0).toString(2);return new Array(8-t.length+1).join("0")+t})).join(""),2)}function l(e){var t=0,i={};while(t<e.length){var n=e.substr(t,4),o=f(e,t),r=e.substr(t+4+4,o);t+=8+o,i[n]=i[n]||[],"RIFF"===n||"LIST"===n?i[n].push(l(r)):i[n].push(r)}return i}function h(e){return[].slice.call(new Uint8Array(new Float64Array([e]).buffer),0).map((function(e){return String.fromCharCode(e)})).reverse().join("")}var p=new t(e.map((function(e){var t=u(l(atob(e.image.slice(23))));return t.duration=e.duration,t})));postMessage(p)}return e.prototype.add=function(e,t){if("canvas"in e&&(e=e.canvas),"toDataURL"in e&&(e=e.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/gi.test(e))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:e,duration:t||this.duration})},e.prototype.compile=function(e){var n=t(i);n.onmessage=function(t){t.data.error?console.error(t.data.error):e(t.data)},n.postMessage(this.frames)},{Video:e}}();"undefined"!==typeof s&&(s.Whammy=E);
/**
 * DiskStorage is a standalone object used by {@link RecordRTC} to store recorded blobs in IndexedDB storage.
 * @summary Writing blobs into IndexedDB.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * DiskStorage.Store({
 *     audioBlob: yourAudioBlob,
 *     videoBlob: yourVideoBlob,
 *     gifBlob  : yourGifBlob
 * });
 * DiskStorage.Fetch(function(dataURL, type) {
 *     if(type === 'audioBlob') { }
 *     if(type === 'videoBlob') { }
 *     if(type === 'gifBlob')   { }
 * });
 * // DiskStorage.dataStoreName = 'recordRTC';
 * // DiskStorage.onError = function(error) { };
 * @property {function} init - This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.
 * @property {function} Fetch - This method fetches stored blobs from IndexedDB.
 * @property {function} Store - This method stores blobs in IndexedDB.
 * @property {function} onError - This function is invoked for any known/unknown error.
 * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var P={init:function(){var e=this;if("undefined"!==typeof indexedDB&&"undefined"!==typeof indexedDB.open){var t,i=1,n=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),o=indexedDB.open(n,i);o.onerror=e.onError,o.onsuccess=function(){if(t=o.result,t.onerror=e.onError,t.setVersion)if(t.version!==i){var n=t.setVersion(i);n.onsuccess=function(){r(t),a()}}else a();else a()},o.onupgradeneeded=function(e){r(e.target.result)}}else console.error("IndexedDB API are not available in this browser.");function r(t){t.createObjectStore(e.dataStoreName)}function a(){var i=t.transaction([e.dataStoreName],"readwrite");function n(t){i.objectStore(e.dataStoreName).get(t).onsuccess=function(i){e.callback&&e.callback(i.target.result,t)}}e.videoBlob&&i.objectStore(e.dataStoreName).put(e.videoBlob,"videoBlob"),e.gifBlob&&i.objectStore(e.dataStoreName).put(e.gifBlob,"gifBlob"),e.audioBlob&&i.objectStore(e.dataStoreName).put(e.audioBlob,"audioBlob"),n("audioBlob"),n("videoBlob"),n("gifBlob")}},Fetch:function(e){return this.callback=e,this.init(),this},Store:function(e){return this.audioBlob=e.audioBlob,this.videoBlob=e.videoBlob,this.gifBlob=e.gifBlob,this.init(),this},onError:function(e){console.error(JSON.stringify(e,null,"\t"))},dataStoreName:"recordRTC",dbName:null};
/**
 * GifRecorder is standalone calss used by {@link RecordRTC} to record video or canvas into animated gif.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GifRecorder
 * @class
 * @example
 * var recorder = new GifRecorder(mediaStream || canvas || context, { onGifPreview: function, onGifRecordingStarted: function, width: 1280, height: 720, frameRate: 200, quality: 10 });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     img.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object or HTMLCanvasElement or CanvasRenderingContext2D.
 * @param {object} config - {disableLogs:true, initCallback: function, width: 320, height: 240, frameRate: 200, quality: 10}
 */
function F(e,t){if("undefined"===typeof GIFEncoder){var i=document.createElement("script");i.src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(i)}t=t||{};var n=e instanceof CanvasRenderingContext2D||e instanceof HTMLCanvasElement;this.record=function(){function e(i){if(!0!==g.clearedRecordedData){if(o)return setTimeout((function(){e(i)}),100);p=h(e),void 0===d(f)&&(f=i),i-f<90||(!n&&u.paused&&u.play(),n||s.drawImage(u,0,0,a.width,a.height),t.onGifPreview&&t.onGifPreview(a.toDataURL("image/png")),l.addFrame(s),f=i)}}"undefined"!==typeof GIFEncoder&&c?(n||(t.width||(t.width=u.offsetWidth||320),t.height||(t.height=u.offsetHeight||240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),a.width=t.canvas.width||320,a.height=t.canvas.height||240,u.width=t.video.width||320,u.height=t.video.height||240),l=new GIFEncoder,l.setRepeat(0),l.setDelay(t.frameRate||200),l.setQuality(t.quality||10),l.start(),"function"===typeof t.onGifRecordingStarted&&t.onGifRecordingStarted(),Date.now(),p=h(e),t.initCallback&&t.initCallback()):setTimeout(g.record,1e3)},this.stop=function(e){e=e||function(){},p&&m(p),Date.now(),this.blob=new Blob([new Uint8Array(l.stream().bin)],{type:"image/gif"}),e(this.blob),l.stream().bin=[]};var o=!1;function r(){l&&(l.stream().bin=[])}this.pause=function(){o=!0},this.resume=function(){o=!1},this.clearRecordedData=function(){g.clearedRecordedData=!0,r()},this.name="GifRecorder",this.toString=function(){return this.name};var a=document.createElement("canvas"),s=a.getContext("2d");n&&(e instanceof CanvasRenderingContext2D?(s=e,a=s.canvas):e instanceof HTMLCanvasElement&&(s=e.getContext("2d"),a=e));var c=!0;if(!n){var u=document.createElement("video");u.muted=!0,u.autoplay=!0,c=!1,u.onloadedmetadata=function(){c=!0},L(e,u),u.play()}var f,l,p=null,g=this}function z(e,t){var i="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(e){"undefined"===typeof s&&e&&"undefined"===typeof window&&"undefined"!==typeof n&&(n.navigator={userAgent:i,getUserMedia:function(){}},n.console||(n.console={}),"undefined"!==typeof n.console.log&&"undefined"!==typeof n.console.error||(n.console.error=n.console.log=n.console.log||function(){}),"undefined"===typeof document&&(e.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return e},e.HTMLVideoElement=function(){}),"undefined"===typeof location&&(e.location={protocol:"file:",href:"",hash:""}),"undefined"===typeof screen&&(e.screen={width:0,height:0}),"undefined"===typeof f&&(e.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),e.window=n)})("undefined"!==typeof n?n:null),t=t||"multi-streams-mixer";var o=[],r=!1,a=document.createElement("canvas"),d=a.getContext("2d");a.style.opacity=0,a.style.position="absolute",a.style.zIndex=-1,a.style.top="-1000em",a.style.left="-1000em",a.className=t,(document.body||document.documentElement).appendChild(a),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var c=this,u=window.AudioContext;"undefined"===typeof u&&("undefined"!==typeof webkitAudioContext&&(u=webkitAudioContext),"undefined"!==typeof mozAudioContext&&(u=mozAudioContext));var f=window.URL;"undefined"===typeof f&&"undefined"!==typeof webkitURL&&(f=webkitURL),"undefined"!==typeof navigator&&"undefined"===typeof navigator.getUserMedia&&("undefined"!==typeof navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),"undefined"!==typeof navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var l=window.MediaStream;"undefined"===typeof l&&"undefined"!==typeof webkitMediaStream&&(l=webkitMediaStream),"undefined"!==typeof l&&"undefined"===typeof l.prototype.stop&&(l.prototype.stop=function(){this.getTracks().forEach((function(e){e.stop()}))});var h={};function p(e,t){"srcObject"in t?t.srcObject=e:"mozSrcObject"in t?t.mozSrcObject=e:t.srcObject=e}function m(){if(!r){var e=o.length,t=!1,i=[];if(o.forEach((function(e){e.stream||(e.stream={}),e.stream.fullcanvas?t=e:i.push(e)})),t)a.width=t.stream.width,a.height=t.stream.height;else if(i.length){a.width=e>1?2*i[0].width:i[0].width;var n=1;3!==e&&4!==e||(n=2),5!==e&&6!==e||(n=3),7!==e&&8!==e||(n=4),9!==e&&10!==e||(n=5),a.height=i[0].height*n}else a.width=c.width||360,a.height=c.height||240;t&&t instanceof HTMLVideoElement&&g(t),i.forEach((function(e,t){g(e,t)})),setTimeout(m,c.frameInterval)}}function g(e,t){if(!r){var i=0,n=0,o=e.width,a=e.height;1===t&&(i=e.width),2===t&&(n=e.height),3===t&&(i=e.width,n=e.height),4===t&&(n=2*e.height),5===t&&(i=e.width,n=2*e.height),6===t&&(n=3*e.height),7===t&&(i=e.width,n=3*e.height),"undefined"!==typeof e.stream.left&&(i=e.stream.left),"undefined"!==typeof e.stream.top&&(n=e.stream.top),"undefined"!==typeof e.stream.width&&(o=e.stream.width),"undefined"!==typeof e.stream.height&&(a=e.stream.height),d.drawImage(e,i,n,o,a),"function"===typeof e.stream.onRender&&e.stream.onRender(d,i,n,o,a,t)}}function b(){r=!1;var t=v(),i=w();return i&&i.getTracks().filter((function(e){return"audio"===e.kind})).forEach((function(e){t.addTrack(e)})),e.forEach((function(e){e.fullcanvas&&!0})),t}function v(){var e;R(),"captureStream"in a?e=a.captureStream():"mozCaptureStream"in a?e=a.mozCaptureStream():c.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var t=new l;return e.getTracks().filter((function(e){return"video"===e.kind})).forEach((function(e){t.addTrack(e)})),a.stream=t,t}function w(){h.AudioContextConstructor||(h.AudioContextConstructor=new h.AudioContext),c.audioContext=h.AudioContextConstructor,c.audioSources=[],!0===c.useGainNode&&(c.gainNode=c.audioContext.createGain(),c.gainNode.connect(c.audioContext.destination),c.gainNode.gain.value=0);var t=0;if(e.forEach((function(e){if(e.getTracks().filter((function(e){return"audio"===e.kind})).length){t++;var i=c.audioContext.createMediaStreamSource(e);!0===c.useGainNode&&i.connect(c.gainNode),c.audioSources.push(i)}})),t)return c.audioDestination=c.audioContext.createMediaStreamDestination(),c.audioSources.forEach((function(e){e.connect(c.audioDestination)})),c.audioDestination.stream}function y(e){var i=document.createElement("video");return p(e,i),i.className=t,i.muted=!0,i.volume=0,i.width=e.width||c.width||360,i.height=e.height||c.height||240,i.play(),i}function R(t){o=[],t=t||e,t.forEach((function(e){if(e.getTracks().filter((function(e){return"video"===e.kind})).length){var t=y(e);t.stream=e,o.push(t)}}))}"undefined"!==typeof u?h.AudioContext=u:"undefined"!==typeof webkitAudioContext&&(h.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){m()},this.appendStreams=function(t){if(!t)throw"First parameter is required.";t instanceof Array||(t=[t]),t.forEach((function(t){var i=new l;if(t.getTracks().filter((function(e){return"video"===e.kind})).length){var n=y(t);n.stream=t,o.push(n),i.addTrack(t.getTracks().filter((function(e){return"video"===e.kind}))[0])}if(t.getTracks().filter((function(e){return"audio"===e.kind})).length){var r=c.audioContext.createMediaStreamSource(t);c.audioDestination=c.audioContext.createMediaStreamDestination(),r.connect(c.audioDestination),i.addTrack(c.audioDestination.stream.getTracks().filter((function(e){return"audio"===e.kind}))[0])}e.push(i)}))},this.releaseStreams=function(){o=[],r=!0,c.gainNode&&(c.gainNode.disconnect(),c.gainNode=null),c.audioSources.length&&(c.audioSources.forEach((function(e){e.disconnect()})),c.audioSources=[]),c.audioDestination&&(c.audioDestination.disconnect(),c.audioDestination=null),c.audioContext&&c.audioContext.close(),c.audioContext=null,d.clearRect(0,0,a.width,a.height),a.stream&&(a.stream.stop(),a.stream=null)},this.resetVideoStreams=function(e){!e||e instanceof Array||(e=[e]),R(e)},this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=b}
/**
 * MultiStreamRecorder can record multiple videos in single container.
 * @summary Multi-videos recorder.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MultiStreamRecorder
 * @class
 * @example
 * var options = {
 *     mimeType: 'video/webm'
 * }
 * var recorder = new MultiStreamRecorder(ArrayOfMediaStreams, options);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStreams} mediaStreams - Array of MediaStreams.
 * @param {object} config - {disableLogs:true, frameInterval: 1, mimeType: "video/webm"}
 */
function W(e,t){e=e||[];var i,n,o=this;function r(){var t=[];return e.forEach((function(e){T(e,"video").forEach((function(e){t.push(e)}))})),t}t=t||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}},t.frameInterval||(t.frameInterval=10),t.video||(t.video={}),t.video.width||(t.video.width=360),t.video.height||(t.video.height=240),this.record=function(){i=new z(e,t.elementClass||"multi-streams-mixer"),r().length&&(i.frameInterval=t.frameInterval||10,i.width=t.video.width||360,i.height=t.video.height||240,i.startDrawingFrames()),t.previewStream&&"function"===typeof t.previewStream&&t.previewStream(i.getMixedStream()),n=new U(i.getMixedStream(),t),n.record()},this.stop=function(e){n&&n.stop((function(t){o.blob=t,e(t),o.clearRecordedData()}))},this.pause=function(){n&&n.pause()},this.resume=function(){n&&n.resume()},this.clearRecordedData=function(){n&&(n.clearRecordedData(),n=null),i&&(i.releaseStreams(),i=null)},this.addStreams=function(o){if(!o)throw"First parameter is required.";o instanceof Array||(o=[o]),e.concat(o),n&&i&&(i.appendStreams(o),t.previewStream&&"function"===typeof t.previewStream&&t.previewStream(i.getMixedStream()))},this.resetVideoStreams=function(e){i&&(!e||e instanceof Array||(e=[e]),i.resetVideoStreams(e))},this.getMixer=function(){return i},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}
/**
 * RecordRTCPromisesHandler adds promises support in {@link RecordRTC}. Try a {@link https://github.com/muaz-khan/RecordRTC/blob/master/simple-demos/RecordRTCPromisesHandler.html|demo here}
 * @summary Promises for {@link RecordRTC}
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCPromisesHandler
 * @class
 * @example
 * var recorder = new RecordRTCPromisesHandler(mediaStream, options);
 * recorder.startRecording()
 *         .then(successCB)
 *         .catch(errorCB);
 * // Note: You can access all RecordRTC API using "recorder.recordRTC" e.g. 
 * recorder.recordRTC.onStateChanged = function(state) {};
 * recorder.recordRTC.setRecordingDuration(5000);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 * @throws Will throw an error if "new" keyword is not used to initiate "RecordRTCPromisesHandler". Also throws error if first argument "MediaStream" is missing.
 * @requires {@link RecordRTC}
 */
function N(e,t){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if("undefined"===typeof e)throw'First argument "MediaStream" is required.';var i=this;i.recordRTC=new s(e,t),this.startRecording=function(){return new Promise((function(e,t){try{i.recordRTC.startRecording(),e()}catch(n){t(n)}}))},this.stopRecording=function(){return new Promise((function(e,t){try{i.recordRTC.stopRecording((function(n){i.blob=i.recordRTC.getBlob(),i.blob&&i.blob.size?e(n):t("Empty blob.",i.blob)}))}catch(n){t(n)}}))},this.pauseRecording=function(){return new Promise((function(e,t){try{i.recordRTC.pauseRecording(),e()}catch(n){t(n)}}))},this.resumeRecording=function(){return new Promise((function(e,t){try{i.recordRTC.resumeRecording(),e()}catch(n){t(n)}}))},this.getDataURL=function(e){return new Promise((function(e,t){try{i.recordRTC.getDataURL((function(t){e(t)}))}catch(n){t(n)}}))},this.getBlob=function(){return new Promise((function(e,t){try{e(i.recordRTC.getBlob())}catch(n){t(n)}}))},this.getInternalRecorder=function(){return new Promise((function(e,t){try{e(i.recordRTC.getInternalRecorder())}catch(n){t(n)}}))},this.reset=function(){return new Promise((function(e,t){try{e(i.recordRTC.reset())}catch(n){t(n)}}))},this.destroy=function(){return new Promise((function(e,t){try{e(i.recordRTC.destroy())}catch(n){t(n)}}))},this.getState=function(){return new Promise((function(e,t){try{e(i.recordRTC.getState())}catch(n){t(n)}}))},this.blob=null,this.version="5.5.9"}
/**
 * WebAssemblyRecorder lets you create webm videos in JavaScript via WebAssembly. The library consumes raw RGBA32 buffers (4 bytes per pixel) and turns them into a webm video with the given framerate and quality. This makes it compatible out-of-the-box with ImageData from a CANVAS. With realtime mode you can also use webm-wasm for streaming webm videos.
 * @summary Video recording feature in Chrome, Firefox and maybe Edge.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WebAssemblyRecorder
 * @class
 * @example
 * var recorder = new WebAssemblyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {webAssemblyPath:'webm-wasm.wasm',workerPath: 'webm-worker.js', frameRate: 30, width: 1920, height: 1080, bitrate: 1024}
 */
function q(e,t){function i(){return new ReadableStream({start:function(i){var n=document.createElement("canvas"),o=document.createElement("video");o.srcObject=e,o.onplaying=function(){n.width=t.width,n.height=t.height;var e=n.getContext("2d"),r=1e3/t.frameRate;setTimeout((function n(){e.drawImage(o,0,0),i.enqueue(e.getImageData(0,0,t.width,t.height)),setTimeout(n,r)}),r)},o.play()}})}var n,o;function r(e,a){if(t.workerPath||a){if(!t.workerPath&&a instanceof ArrayBuffer){var s=new Blob([a],{type:"text/javascript"});t.workerPath=b.createObjectURL(s)}t.workerPath||console.error("workerPath parameter is missing."),n=new Worker(t.workerPath),n.postMessage(t.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),n.addEventListener("message",(function(e){"READY"===e.data?(n.postMessage({width:t.width,height:t.height,bitrate:t.bitrate||1200,timebaseDen:t.frameRate||30,realtime:!0}),i().pipeTo(new WritableStream({write:function(e){n&&n.postMessage(e.data.buffer,[e.data.buffer])}}))):e.data&&(o||d.push(e.data))}))}else fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then((function(t){t.arrayBuffer().then((function(t){r(e,t)}))}))}function a(){n&&(n.postMessage(null),n.terminate(),n=null)}"undefined"!==typeof ReadableStream&&"undefined"!==typeof WritableStream||console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),t=t||{},t.width=t.width||640,t.height=t.height||480,t.frameRate=t.frameRate||30,t.bitrate=t.bitrate||1200,this.record=function(){d=[],o=!1,this.blob=null,r(e),"function"===typeof t.initCallback&&t.initCallback()},this.pause=function(){o=!0},this.resume=function(){o=!1};var d=[];this.stop=function(e){a(),this.blob=new Blob(d,{type:"video/webm"}),e(this.blob)},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){d=[],o=!1,this.blob=null},this.blob=null}"undefined"!==typeof s&&(s.DiskStorage=P),"undefined"!==typeof s&&(s.GifRecorder=F),"undefined"===typeof s&&(e.exports=z,r=[],a=function(){return z}.apply(t,r),void 0===a||(e.exports=a)),"undefined"!==typeof s&&(s.MultiStreamRecorder=W),"undefined"!==typeof s&&(s.RecordRTCPromisesHandler=N),"undefined"!==typeof s&&(s.WebAssemblyRecorder=q)}).call(this,i("c8ba"),i("4362"))},aa56:function(e,t,i){"use strict";i("f362")},f362:function(e,t,i){}});
//# sourceMappingURL=app.84af3137.js.map